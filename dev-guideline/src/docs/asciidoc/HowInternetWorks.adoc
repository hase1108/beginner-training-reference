include::include_all.adoc[]

:toclevels: 5
:sectnums:

[HowInterWorks]
= インターネットの仕組み

[[HowInterWorks_Overview]]
== Overview
今日のシステム開発においては、単純に知識の収集のみならず、ライブラリの取得やインターネットを通じた遠隔サーバや各種サービスへの接続など、インターネットの利用が不可欠となっている。 +
本節ではそのインターネットがどのような仕組みで成立しているか概要を解説する。 +

[[HowInterWorks_Internet]]
== ネットワーク/インターネットとは

複数のコンピュータ(PC-PCやPC-サーバ)などを接続したシステムを総称して**ネットワーク**と呼ばれる。 +
対してインターネットは、そのネットワークを相互に接続し、全世界をカバーした情報通信網である。  +
概略図を以下に示す。

.インターネットの構成
[#internet-components]
image::HowInternetWorks/InternetComponent.png[インターネットの構成]

[[HowInterWorks_Internet_LAN]]
=== LAN(Local Area Network)
LANはネットワークを構成する最小単位で、そのネットワークは通常大きくとも一施設の範囲に収まることが多い。 +
ルータを用いて外部のインターネットに接続することもできるが、外部インターネットに接続せず、閉域網として内部に社内ポータルやデータベースをセキュアに保持することができる。

[[HowInterWorks_Internet_WAN]]
=== WAN(Wide Area Network)
LAN同士を相互に接続したものをWANと呼ぶ。接続されたLANは必ずしも地理的に隣接するものではない。 +
プロバイダーなどを通じて外部のWANと相互に接続したものをインターネットということもできる。 +
WANを直接インターネットに接続せず、ある組織内におけるプライベートネットワークとしたものをインターネットと比較し``イントラネット``と呼称することもある。 +
この場合、外部のインターネットと接続する部分に``プロキシサーバ``を建て、外部と通信する際に監視とフィルタリングをする場合が多い。  

[[HowInterWorks_Communication]]
== ネットワーク通信手法
<<_HowInterWorks_Internet,ネットワーク/インターネットとは>>で説明したように、ネットワークは複数の機器を接続した構造をし、インターネットはそれを全世界に広げたものになる。 +
この時、接続された機器の間では好き勝手なルールでは通信が成立しないため、共通したルール(**プロトコル**)で通信を行う。 +
ネットワークを構築するにあたり、考慮するプロトコルは非常に多いため、階層構造としてまとめて記述したものとして、**OSI参照モデル**および現在のインターネットのデファクトともいえるTCP/IPを基準とした**TCP/IPモデル(インターネトプロトコルスイート)**というモデルが存在する。 +
両モデルは同じような階層構造をしており、共通する部分も多いが作成した母体などが異なるため、必ずしも一致しない。 +
業務上TCP/IPモデルを押さえておけばよいことが多いため、本解説では主にTCP/IPモデルを利用して説明を行う。 +
以下に双方のモデルの概要図を示す。

.インターネットモデル概要図
[#internet-model]
image::HowInternetWorks/InternetModel.png[インターネットモデル概要図]

.OSI参照モデルの階層構造
[cols="10,30,60", options="header"]
|===
|項番
|名称
|概要

|1-1
|アプリケーション層
|ファイルの転送やDBアクセスなど具体的な通信サービスを提供する

|1-2
|プレゼンテーション層
|データの表現方法を制御する

|1-3
|セッション層
|通信の開始から終了や接続の回復方法などを規定する

|1-4
|トランスポート層
|通信時のエラー訂正や再送制御などを規定する

|1-5
|ネットワーク層
|データをどこに送信するかを選択する

|1-6
|データリンク層
|ネットワーク的に隣接する機器への信号の受け渡し方式を規定する

|1-7
|物理層
|イーサネットなどネットワークに接続するための物理的な方式や機構を規定する
|===

.TCP/IPモデルの階層構造
[cols="10,30,60", options="header"]
|===
|項番
|名称
|概要

|2-1
|アプリケーション層
|ファイルの転送やDBの接続など、具体的な通信サービスを提供する

|2-2
|トランスポート層
|主にTCPなど通信方式をつかさどるレイヤ

|2-3
|インターネット層
|主にIPなどの通信相手の決定を行うレイヤ

|2-4
|リンク層
|ネットワークへの接続方式を規定するレイヤ
|===

[[HowInterWorks_Communication_Protcol]]
=== プロトコルの詳細
各TCP/IPモデルの中のプロトコルで、実務上意識することの多いものをピックアップして紹介する。 +
リンク層に位置するプロトコルは意識をすることが少ないため省略する。

[[HowInterWorks_Communication_Protcol_Internet]]
==== インターネット層

[[HowInterWorks_Communication_Protcol_Internet_IP]]
===== IP
IPはTCP/IPモデルの名称となっているように、インターネット通信の基本的なプロトコルの一つである。 +
このプロトコルでは、ネットワークに接続された機器に対して**IPアドレス**という数字を付与し、その数字を使用して通信時に相手を指定、呼び出しができるようにすることを規定している。 +
また、通信を行う際は情報を**パケット**と呼ばれる単位でやり取りをすることが特徴だが、実際の現場で意識することは少ないため、今回は説明を省略し主にIPアドレスに関する説明を行う。 +

IPアドレスは、アドレスの振り分け方式により主に2つに分けられる。 +
現在最も普及しているのは、8bitの数字を4つ繋げ、``0.0.0.0～255.255.255.255``の計32bit約43億までのアドレスを表現できる**IPv4**と、IPv4によるアドレスの枯渇が生じたために考えられ、16bitを8つ、``0:0:0:0:0:0:0:0～ffff:ffff:ffff:ffff:ffff:ffff:ffff``の計128bit約340潤のアドレスを表現できる**IPv6**が存在する。 +

どちらにしても、IPでは付与された数字をインターネットにおける住所のように取り扱うことで、接続先を特定することができる。 +
例えば``www.google.co.jp``のIPアドレスは``172.217.161.35``であるため、ブラウザのアドレスバーでIPアドレスを入力するとgoogleのページを開くことができる。 +
他にもコマンドプロンプトやシェルなどでは``ping``コマンドを利用することで、以下の画像のように対象のIPアドレスに対するアクセス状況を確認することができる。 +

.pingコマンド
[#internet-model]
image::HowInternetWorks/ping.png[pingコマンド]

pingコマンドは特定のサーバなどから応答が帰ってこないなどの場合に原因を特定するための手掛かりにもなる。 +

また、一部のIPアドレスは特定の用途の為に占有されており、**予約アドレス**と呼ばれる。以下に代表的な予約アドレスを示す。+

.予約アドレス
[cols="30,70", options="header"]
|===
|IPアドレス
|概要

|127.0.0.0/8
|**ループバックアドレス**よされ、自分自身を指す。

|ホスト部が全て0
|ネットワーク自身を示す。

|ホスト部が全て1
|**ブロードキャストアドレス**とされ、同じネットワークに属する機器全てに通信を行う。

|169.254.0.0/16
|**リンクローカルアドレス**とされ、DHCPでIPアドレスの取得が失敗した際に付与される。
|===
[[HowInterWorks_Communication_Protcol_Internet_IP_Routing]]
====== IPによるルーティング
前述したように、IPアドレスはインターネット上の住所のように取り扱うが、目的のIPアドレスに直接機器が接続されている訳ではないため、実際に通信を行う際はどの通信経路を使用すれば目的のIPアドレスに到達するか判断する必要がある。 +
詳細は説明しないが、インターネットにアクセスする際はルータやL3スイッチと呼ばれるネットワーク機器に接続する。 +

ネットワーク機器は複数のネットワークと相互に接続しており、どのIPアドレスの範囲がどのケーブルに対応するかを内部に保持している。 +
特定のIPアドレスに対するアクセスがあった際は、そのテーブルを参照し、情報を伝達する。 +
一つのルータ内に全てのIPアドレスの情報を持つことは現実的ではないため、複数のルータを次々リレーしていくことで最終的な目的地に到達する。

[[HowInterWorks_Communication_Protcol_Internet_IP_GlobalPrivate]]
====== グローバルIP/プライベートIP
前述したように、ネットワークに接続するにあたり、各機器はIPアドレスを持たなければならない. +
一方で https://www.soumu.go.jp/johotsusintokei/whitepaper/ja/h30/html/nd111200.html[総務省の平成30年度版情報通信白書]によると、全世界でインターネットに接続できる機器は400億台以上存在すると予想される。 +
現在主流のIPv4では、すべてのアドレスをフルに使えるとしても総アドレス数は43億程度である。 +
この場合、全ての機器に対してIPアドレスを振り分けてしまうと、IPアドレスが重複してしまうことになる。 +
IPアドレスが重複してしまうと通信先を一意に決めることができないため、通信が成立しなくなる。 +
そこで、通常インターネットに接続できる一意なIPアドレス(**グローバルIP**)は個々人のPCなどに対して直接払いだされることはなく、あるネットワーク(LAN/WAN)内でのみ一意である**プライベートIP**を保有し、グローバルIPを持つ機器を経由してネットワークにアクセスする。 +
以下に概要図を示す。 +

.グローバル/プライベートIPアドレス
[#global-privateIP]
image::HowInternetWorks/Global-privateIP.png[グローバル/プライベートIPアドレス]

概要図に示すように、通常グローバルIPとプライベートIPは1対多の関係になる。 +
プライベートIPを持つ機器からインターネット上の特定の機器にアクセスする際は、前述したように直接インターネットにアクセスするのではなく、通常グローバルIPアドレスが付与されたルータ等の機器を通してアクセスを試みる。 +
この時ルータへの通信内容は目的となる機器のIPアドレス、および自身のプライベートIPが含まれる。 +
ルータはその通信を送信元個別のポート(ポート番号については<<>>で説明を行う)で受信し、送信元を自身の保有するグローバルIPアドレスと任意のポートにマスクして目的のIPアドレスへリクエストを送信する。また、同時に本来の送信元プライベートIPとポート/変換後のIPとポートの情報を自身の中にテーブルとして保持しておく。 +

インターネット上の機器からレスポンスが帰ってくると、ルータは自身の中に保存したテーブルを参照し、どのプライベートIPに対応するか確認し、レスポンスを転送する。 +
この技術を**NAPT(ネットワークアドレス変換)**と呼ぶ。 +
全43億のIPアドレスのうち、下記の範囲のIPアドレスはプライベートIPとして使用することを想定されている。 +

.プライベートIPアドレス
[cols="60,40", options="header"]
|===
|IPアドレス範囲
|アドレス数

|10.0.0.0 – 10.255.255.255
|約1700万

|172.16.0.0 – 172.31.255.255
|約100万

|192.168.0.0 – 192.168.255.255
|約6万5000
|===

プライベートIPは、別のWANやLANでは重複しても問題ないため、インターネットに接続可能な機器の数を増やすことができる。 +

グローバルIPをどの機器に振り分けるかは全て管理団体によって管理されている。 +
全世界的には https://www.iana.org/[IANA]が管理し、国/地域に対して振り分けるIPを管理し、国/地域内では各地域の管理団体(アジアでは https://www.apnic.net/[APNIC] 日本では https://www.nic.ad.jp/ja/[JPNIC]が管轄)が管理し、NTTなどに代表される国内のISP(Internet Service Provider)に対し割り振る。 +
通常の家庭では、ISPと契約した際に割り当てられたグローバルIPを持つ機器を通じてインターネットにアクセスすることができるようになる。 +

[[HowInterWorks_Communication_Protcol_Internet_IP_Subnet]]
====== サブネット

ある程度大きな組織で同一LANを利用していると、セキュリティの観点から特定の機器へのアクセスを制限したり、通信時のブロードキャストによる余計な通信の抑制を行いたい場合がある。 +
そういった場合、同一LAN内で``理論的なネットワークの分割``を行う際に利用するのが**サブネット**および**サブネットマスク**である。 +
サブネットによりネットワークを分割すると、同一ネットワーク内での通信は分割前後で変わらないが、ネットワークを超えた機器にアクセスするためにはルータなどによってルーティングする必要が生じる。 +
概要図を以下に示す。 +

.サブネット
[#global-privateIP]
image::HowInternetWorks/Subnet.png[サブネット]

サブネットはIPアドレスに**サブネットマスク**を用いることにより機器が属する``ネットワーク部``と機器自体を示す``ホスト部``に分割することで構築する。 +
前述したように、IPv4におけるIPアドレスは8ビットの数値を4つ組み合わせてできている。それをネットワーク部とホスト部に分割する際にマーカとして機能するのがサブネットマスクである。 +
一番基本的なサブネットマスクはIPアドレスと同様に8ビット×4の組み合わせである``xxx.xxx.xxx.xxx``で表され、IPアドレスとAND演算をすることで得られる結果がネットワーク部を示すことになり、残りの部分がホスト部になる。 +
計算方法を以下に示す。 +

```
IPアドレス: 10.19.16.175
サブネットマスク : 255.255.0.0
↓
IPアドレス: 00001010 00010011 00010000 10101111
サブネット: 11111111 11111111 00000000 00000000
↓ AND演算
00001010 00010011 00000000 00000000 →　ネットワーク部 10.19.0.0
```

通常サブネットマスクを二進数で表示する意味はあまりないので、通常先頭からの1の個数をIPアドレスの後に``/``で表示した**CIDR記法**でサブネットマスクを指定する。 +
概要図で言うと**xxx.xxx.xxx.xxx/yy**の``yy``の部分がサブネットマスクを表す。 
アプリケーション開発ではあまりサブネットマスクまでは意識することは少ないが、AWSを基盤として使用する場合はネットワーク構成を考慮する必要があるため知っておくべきである。


[[HowInterWorks_Communication_Protcol_Tranceport]]
==== トランスポート層
トランスポート層では、誤り検出コードや通信の再送信要求などを提供したり、パケットに対して**ポート番号**の追加を行い、機器感の信頼できる通信が可能であることを提供する。 +
トランスポート層のプロトコルのうち、今回はデファクトである**TCP**の一部について説明する。

[[HowInterWorks_Communication_Protcol_Tranceport_TCP]]
===== TCP
TCPは、ネットワークを用いた通信において、通信の接続や通信の誤り検出、再送要求などを取り扱る。 +
しかし通常、アプリケーション開発において、上記の機能を意識することはあまり多くない。 +
そのため今回はTCPの要素のうち意識することが多い**ポート**について説明を行う。 +

ポートはIPが住所を示すとした場合の部屋番号に対応すると考えられる。 +
ポートはネットワークに接続されている機器(ホスト)一つに65536個用意されており、それぞれ0～65535までのポート番号が対応している。 +
ホスト側ではネットワークを利用した通信を行うサービスが動作している場合、1サービスに対して1ポートが対応されてる。 +
外部からサービスにアクセスする際は、IPアドレスとポート番号を指定することでサービスと通信を行うことができる。 +
HTTPを用いてアクセスする場合は``http://xxx.xxx.xxx.xxx:yyyy/``のようにyyyyの部分でポートを指定する。なお、通常このポート番号を省略した場合は自動的に80番ポートに接続される。 +
65536個のポートのうち0～1024までは慣例的に**ウェルノウンポート**と呼ばれ、特定のサービスの為に使用される。以下に代表的な例を示す。 +

.ウェルノウンポート
[cols="30,70", options="header"]
|===
|ポート番号
|概要

|20,21
|FTPを利用してファイル送受信をする際に利用

|25
|SMTPを利用してメールの送信を行う際に利用

|53
|DNSを利用して名前解決を行う際に利用

|110
|POP3を利用してメールを受信する際に利用
|===

[[HowInterWorks_Communication_Protcol_Application]]
==== アプリケーション層
アプリケーション層はネットワークを用いた通信を介して各機器(ホスト)が利用することができる具体的なシステムやサービスを示す。 +
実際の開発現場では最も密接に関わりあう事が多く、またこのレイヤに存在されるシステムやサービスは非常に幅広いため代表的なものに絞って説明を行う。 +

[[HowInterWorks_Communication_Protcol_HTTP]]
===== HTTP(Hypertext Transfer Protocol)
非常に有名なプロトコルで、Webブラウザなどのクライアント側とWebサーバが通信する際の手順とフォーマットを規格化したものである。 +
HTTPを用いた通信方式の概要図を以下に示す。

.HTTP概要
[#HTTP]
image::HowInternetWorks/HTTP.png[HTTP]

概要図にもあるように、クライアントとサーバはTCP上に成立した通信経路を利用し、クライアント側からのリクエストに対し、サーバ側からのレスポンスが帰ってくることで成立する。 +
リクエストおよびレスポンスは以下の形式の電文になる。 +

.リクエスト
----
<開始行> //(1)
<ヘッダー(複数行)> //(2)
!-- 一行空白 --!
<ボディ> //(3)
----

.リクエスト電文
[cols="10,90", options="header"]
|===
|項番
|概要

|1
|クライアントが行いたい処理を示す**メソッド**と、どこにその要求を伝えるかを示す**パス**およびHTTPのバージョンで成り立つ。 +
メソッドに指定できる処理はHTTPの仕様で決まっており、一覧は<<method-list,以下>>に示す。 +
パスは``/xxx/yyy/zzz``や後述する<<HowInterWorks_Communication_Protcol_URL,URL>>の形式にのっとった``http://xxx.yyy.xxx/``という形式で表す。 +
開始行の例を以下に示す。 +
``GET http://xxx.yyy.zzz/pp/sss HTTP/1.1``


|2
|HTTP通信に関わる様々な情報を記述することができ、``フィールド名:値``の形式で表される。 +
独自のフィールドを作成することもできるため、記述できる内容は非常に多いが、一般的に使用されることの多いフィールドを以下に示す。 +

・User-Agent:クライアントとなっているアプリケーション自身の名前(Curl,Chrome)を記述する。 +
・Authorization:認証情報をサーバに伝える。 +
・Cookie:サーバとの通信中に接続しているユーザの情報を一時的に記述する。


|3
|サーバに対して送信したい情報を記述する。 +
Webページの入力フォームなどに入力された文字列などはこの部分に格納されてサーバに送られる事が多い。 +
記述内容はコンテンツに依存する。
|===

.レスポンス
----
<ステータス行> //(1)
<ヘッダー(複数行)> //(2)
!-- 一行空白 --!
<ボディ> //(3)
----

.レスポンス電文
[cols="10,90", options="header"]
|===
|項番
|概要

|1
|リクエストを受けたサーバがどのように応答したかを三桁の数字で表す。 +
大きく以下のように分けられるが、それぞれで更に細かく分けられる。 +
・100番台:特殊用途 +
・200番台:リクエスト成功 +
・300番台:リクエストは成功しているが、サーバからクライアントに要求がある +
・400番台:クライアントからのリクエストが不正 +
・500番台:サーバ内部でエラーが発生 +

|2
|リクエストのヘッダーと同じようにレスポンスに関する情報を格納できる。

|3
|こちらもリクエストと同様に、クライアントに返却したい情報を格納する。 +
Webページの閲覧をクライアントが要求した場合はhtmlが格納されている。 +
|===

HTTPで利用されるメソッドの一覧を以下に示す。 +
メソッドでサーバに対してどのような操作をするか指示することができる。 +
基本的には**GET**、**POST**、**DELETE**、**PUT**が使われる事が多く、これでCRUD操作が実現できる。

.メソッド一覧
[[method-list]]
[cols="10,90", options="header"]
|===
|メソッド名
|概要

|GET
|URLで指定したファイルorプログラムの出力を要求する

|HEAD
|GETと同様だが、ボディは返さずヘッダのみ返す

|POST
|ボディにkey-value形式で値を格納しサーバに渡す

|OPTIONS
|サーバが受け取り可能なメソッド一覧を返す

|PUT
|パスで指定したサーバ上のファイル/情報を書き換える

|DELETE
|パスで指定したサーバ上のファイル/情報を削除する

|TRACE
|サーバが受け取ったヘッダとボディをそのまま返す

|CONNECT
|HTTPのプロトコル上にほかのプロトコルのパケットを流せるようにする
|===

[[HowInterWorks_Communication_Protcol_URL]]
===== URL(Uniform Resource Locator)
本来TCP/IPモデルとは異なる概念だが、アプリケーション層の各プロトコルを使用する際に頻出する表現であるため、ここに記載する。 +
URLは**URI**と呼ばれる概念のなかの一つで、ネットワーク上のファイルなどのリソースの位置を表現するのに使用される。 +
以下に形式を示す。
実際には、スキーム名以降の記述方式はスキーム名の指定する方式に則るが、今回はHTTPやFTPを指定した時に記述する方式に関して説明する。

.URL
----
スキーム名(1)://ホスト名(2)/パス名(3)
----

.URL概要
[[url-list]]
[cols="10,90", options="header"]
|===
|名称
|概要

|スキーム名
|どの方式で相手と通信を行うかを指定する。 +
HTTPを使用するのであれば``http``を指定し、FTPを使用するのであれば``ftp``を指定する。 +
なお、正式なスキームは https://www.iana.org/[IANA]が管理しており、それ以外にも非公式だが広く使用されているスキームが存在する。

|ホスト名
|通信の相手先となる機器を指定する。 +
IPアドレス＋ポート番号を利用し``IP:ポート番号``というように指定することもできるが、通常は後述する<<HowInterWorks_Communication_Protcol_DNS,DNS>>を利用するため、ホスト名とドメイン名を指定する事が多い。

|パス名
|相手ホスト内に配置されているどのファイル/階層を取得したいかを指定する。
|===

[[HowInterWorks_Communication_Protcol_DNS]]
===== DNS(Domain Name System)
ネットワークで接続した機器同士で通信を行う際に、通信先を見つけるための仕組みとして前述したように<<HowInterWorks_Communication_Protcol_Internet_IP,IP>>が使用されている。 +
しかし、IPアドレスは通常数字、もしくはアルファベットの羅列で表現されるため、一見しただけではどこに対して通信をしようとしているかを理解することは困難を極める。 +
そこで、IPアドレスに対して、人間の理解しやすい文字列(ホスト名・ドメイン名)を対応させる仕組みを**DNS**と言う。 +
DNSで表現されるホスト名・ドメイン名の文字列の形式を以下に示す。 +
なお、ドメイン名が持つ機能としてはIPアドレスと同等なため、世界中で一意にならなければいけない。 +
ドメイン名の管理は https://www.icann.org/[ICANN]が行っている。

.ホスト名・ドメイン名の構造
```
www.xxx.yyy.zzz.co.jp
 ①             ③ ③
```
.ドメイン構造
[[domain]]
[cols="10,30,60", options="header"]
|===
|項番
|名称
|概要

|①
|ホスト名
|ネットワークで接続された機器(ホスト)の名称を示す。 +
一つのホストが複数のホスト名を持つ場合もある。

|②
|トップレベルドメイン
|``.jp``や``.gov``など、ドメインの中で最上位のドメイン名である。

|③
|セカンドレベルドメイン
|トップレベルドメイン以下のドメイン部分を示す。 +
前述の通り、トップレベルドメイン含めて一意でなければならない。 +
|===

DNSは文字列とIPを紐づける仕組みであるが、その紐づけたデータは``DNSサーバ``が保持している。 +
また、一つのDNSサーバが全ての紐づけデータを持って都度検索するのは効率が悪いため、通常複数のサーバで共同して紐づけデータを取得する仕組みになっている。

[[HowInterWorks_Communication_Protcol_SSLTLS]]
===== SSL/TLS
ネットワークを使用して通信する際、何も行わない場合は平文で行われている場合が多い。 +
HTTPなどを使用して通信する場合、通信経路には中継などを行うハブやルータなどが含まれているため、悪意を持った機器が接続されている場合は通信内容を盗み見られてしまう場合がある。 +
そこで通信内容を暗号化する仕組みを**SSL/TLS**と呼ぶ。 +
SSL/TLSはサーバ証明書に付与した公開鍵暗号化方式を用いて暗号化される。 +
概要を以下に示す。

.SSL/TLS概要1
[#SSL/TLS1]
image::HowInternetWorks/ssltls1.png[SSL/TLS概要1]

.SSL/TLS概要2
[#SSL/TLS1]
image::HowInternetWorks/ssltls2.png[SSL/TLS概要2]

.SSL/TLS概要3
[#SSL/TLS1]
image::HowInternetWorks/ssltls3.png[SSL/TLS概要3]

.SSL/TLS概要4
[#SSL/TLS1]
image::HowInternetWorks/ssltls4.png[SSL/TLS概要4]

なお、SSL/TLSは暗号化のみを行うため、単独で使用することはない。 +
通常他のアプリケーション層のプロトコルと組み合わせて利用する。 +
例えば、HTTPと組あわせて**HTTPS**としたり、MTPと組み合わせて**SMTP**としたりする。

[[HowInterWorks_Communication_Protcol_SSH]]
===== SSH(Secure Shell)
HTTPやFTPでは、ネットワークで接続された機器に対して情報を要求することはできるが、機器自身を操作することはできない。 +
ネットワーク越しに遠隔地にあるサーバなどに接続し、サーバを操作することは頻繁にあるため、**SSH**というプロトコルを使用する。 +
SSHはサーバに接続するにあたり、パスワード、もしくは公開鍵暗号化方式を使用して接続する。 +
公開鍵を利用する場合は、公開鍵と秘密鍵をあらかじめ生成し、それを用いて暗号化した通信を行う。 +

通常、sshを用いて通信を行い対場合は、LinuxであればデフォルトでSSHコマンドが利用できるが、Windowsの場合はOpenSSHなどのコマンドラインアプリケーションをダウンロードして利用するか、TeraTermなどのアプリケーションを利用することが多い。 +
bashを用いてAWSのEC2インスタンスにSSH接続をすると以下のようになる。 +

.ssh接続
[#ssh]
image::HowInternetWorks/ssh.png[SSL/TLS概要4]