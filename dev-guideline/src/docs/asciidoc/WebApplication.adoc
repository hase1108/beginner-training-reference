include::include_all.adoc[]

:toclevels: 5
:sectnums:

[WebApplication]
= WebApplicationとは

[WebApplication_Overview]
== Overview

アプリケーションの形態として、各ユーザのコンピュータに直接インストールして利用するようなアプリケーション(ネイティブアプリ)が多く存在するが、現在業務用のアプリケーションなどでもウェブ技術を基盤としたアプリケーションが多く開発されている。 +
本章では、JavaによるWebアプリケーションを作成する前段階として、Webアプリケーションを構成する技術などを説明する。

[WebApplication_WhatIs]
== WebApplicationとは
<<WebApplication_Overview,Overview>>で説明したように、Webアプリケーションはウェブ技術を基盤としたアプリケーションである。 +
ウェブ技術を基盤としているため、アプリケーション利用者はインターネットを経由してアプリケーションを利用する。 +
この形態のアプリケーションを利用するメリットとしては、以下の事があげられる。

* ユーザのコンピュータにアプリケーションを一々ダウンロードする必要がない
* インターネットと端末が存在すれば、外出先でも利用できる
* 各ユーザの実行環境をあまり気にする必要がない

一方デメリットとしては

* インターネットがなければ基本的に利用できない
* インターネット回線の障害などアプリケーション由来でない理由での障害が発生する
* アプリケーションのレスポンスが回線速度などにも依存してしまう

などが上げられる。 +
必ずしもウェブアプリケーションが優れている訳ではないため、システムの要件を勘案して適当な構成をとる必要がある。

[WebApplication_WhatIs_SysConfig]
=== システム構成

前述のように、Webアプリケーションはウェブ技術を基盤とし、インターネットを経由してアプリケーションを利用する。 +
そのため、アプリケーション本体とユーザの端末があれば成立するネイティブアプリケーションと異なり、ユーザの端末以外にもアプリケーションを利用するためにシステムを構築する必要がある。 +
以下に最も単純なユーザが要求した何らかの静的コンテンツ(テキストや画像など)を返却するWebアプリケーションのシステム構成を示す。 +
なお、インターネットを経由した通信方式については、<<HowInternetWorks.adoc#HowInterWorks_Communication,ネットワーク通信手法>>を参照すること。

.シンプルなWebアプリケーション
[#SimpleWebApp]
image::WebApp/SimpleWebApp.png[シンプルなWebアプリケーション]

この形式では、ユーザはユーザのコンピュータに存在する何らかのWebクライアントソフトに対して、要求を発行する。 +
要求を受け付けたWebクライアントソフトは、入力された情報に従いインターネットを経由して指定されたWebサーバに対して要求を行う。 +
Webサーバでは、物理的なマシン上でWebサーバの機能を持つアプリケーション(ミドルウェア)が動作しており、要求を受けた静的コンテンツをレスポンスとしてWebクライアントに返却する。 +
Webクライアントは返却されたデータをユーザに対して表示することで一連の動作が完了する。 +
この構造では、Webサーバ上では基本的にJavaやその他のプログラミング言語を動作させる事ができないため、リクエストに応じた動的な処理やビジネスロジックを実行することができない。 +
そこで、現在主流な方式として**Web三層構造**というものがよく用いられる。 +
以下にWeb三層構造の概要図を示す。 

.Web三層構造
[#Three-layerStructure]
image::WebApp/Three-layerStructure.png[Web三層構造]

Web三層構造では、WebサーバにWebクライアントからリクエストがインターネット経由で届くところまでは一緒だが、その後ろにプログラムを配置しビジネスロジックなどを行うアプリケーションサーバと様々なデータを保存し、適宜取り出すデータベースサーバが配置され、それそれ連動して処理を行うことが異なる。 +
この三層構造のメリットとしては以下があげられる。 +

* それぞれのサーバの責任分界点が明確になる
* DBなどは直接インターネットに公開されるとセキュリティに問題がある
* ミドルウェアやハードウェアをそれぞれ選択することができる

なお、各サーバ間の通信プロトコルは共通ではなく、各ミドルウェアで異なる。

[WebApplication_WhatIs_Tech]
=== 構成する技術

本節では、Webアプリケーションを構築する上で基盤となる各種技術をそれぞれ説明していく。

[WebApplication_WhatIs_Tech_WebServer]
==== Webサーバ

Webサーバは前述したように、ユーザからHTTPによるリクエストを受付け、内部に保持する静的コンテンツをユーザに返却したり、APサーバへの処理を橋渡しする窓口のような役割を果たす。 +
Webサーバは通常ハードとソフト両面で様々な特徴を持つ。 +

ハード

* 複数ユーザの同時アクセスに耐えられるメモリ
* アクセス処理ができるCPU
* 静的コンテンツを保持するHDD
* 長時間起動したままにできる耐久性

ソフト

* HTTP/HTTPSを理解できる
* APサーバと通信可能なプロトコルが理解できる

なお、性能にこだわらなければ各個人のコンピュータにソフトウェアをインストールしてWebサーバとして運用することもできる。 +

Webサーバのソフトウェアとして以下のものがあげられる。

* https://httpd.apache.org/[Apache HTTP Server]
* https://www.nginx.com/[Nginx]

[WebApplication_WhatIs_Tech_APServer]
==== APサーバ

APサーバは前述したように、リクエストに対してプログラムを動かし、適当なビジネスロジックなどを働かせる目的を持つサーバである。 +
APサーバのハードとしての特徴はWebサーバとあまり大差ないが、ソフトとしては以下の特徴がある。 +

* 実装するプログラムが実行可能な環境を持つ
* DBと連携を行うシステムであればDBと通信可能なプロトコルを理解できる

これもWebサーバと同様に、個人のコンピュータに環境を構築すればAPサーバとして利用することもできる。 +

APサーバ用のソフトウェアとして以下のものが上げられる。

* http://tomcat.apache.org/[Apache Tomcat]
* https://wildfly.org/[WildFly]

なお、Tomcat/WildFlyに関しては簡易的なWebサーバとしての機能も持つ。

[WebApplication_WhatIs_Tech_HttpHttps]
==== HTTP/HTTPS

[WebApplication_WhatIs_Tech_Html]
==== html

[WebApplication_WhatIs_Tech_HTML]
==== DOM

[WebApplication_WhatIs_Tech_Browser]
==== ブラウザ

[WebApplication_WhatIs_Tech_Cache]
==== キャッシュ

[WebApplication_WhatIs_Tech_Session]
==== セッション

[WebApplication_REST]
== REST

[WebApplication_REST_Tech]
=== 構成する技術

[WebApplication_WhatIs_Tech_Json]
==== json